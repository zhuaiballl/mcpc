# MCP服务器数量统计配置文件

# 调度器配置
scheduler:
  interval_hours: 1  # 运行间隔（小时）

# 日志配置
logging:
  level: INFO
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# 输出目录
output_dir: "stats"

# 网站配置列表
sites:
  - name: "mcp_market"
    url: "https://mcpmarket.com/"
    count_selector: "body > main > div > section > div > div > div.mb-1.md\\:mb-2 > div > div.flex.items-center.gap-2 > span > strong"
    fallback_selectors:
      - ".flex.items-center.gap-2 span strong"
      - "span strong"
      - "strong"
    timeout: 30
    type: "selenium_text"
    headers:
      User-Agent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"

  - name: "mcp_so"
    url: "https://mcp.so/"
    count_selector: "body > div > main > div.flex-1.px-4.md\\:px-6.pb-16.pt-4 > section.px-4.md\\:px-8.py-4 > div > div > p > span"
    fallback_selectors:
      - "section.px-4.md\\:px-8.py-4 > div > div > p > span"
      - "section.px-4.md\\:px-8.py-4 p span"
      - "section p span"
      - "p > span"
    timeout: 45
    headers:
      User-Agent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
    # Cloudflare保护，需要特殊处理
    cloudflare_protected: true
    # 更长的请求间隔
    request_delay: 10
    # 最大重试次数
    max_retries: 2
    # 添加Referer
    referer: "https://www.google.com/"
    # 更真实的User-Agent
    user_agent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"

  - name: "pulse_mcp"
    url: "https://www.pulsemcp.com/servers"
    count_selector: "#mcp-servers-index > div.flex.flex-col.items-center.md\\:px-0 > div.mb-2 > div > span.text-14.font-bold.text-pulse-purple.hidden.md\\:block"
    fallback_selectors:
      - "span.text-14.font-bold.text-pulse-purple"
      - ".text-pulse-purple"
      - "span.font-bold"
    timeout: 30
    headers:
      User-Agent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"

  - name: "smithery"
    url: "https://smithery.ai/servers"
    type: "smithery_pagination_count"
    last_page_selector: "body > div.flex.min-h-screen.flex-col > div.flex-1 > main > div > div > div.flex-1.min-w-0 > div.mt-4 > div > nav > ul > a:nth-child(6)"
    server_list_selector: "body > div.flex.min-h-screen.flex-col > div.flex-1 > main > div > div > div.flex-1.min-w-0 > div.mt-4 > div > div > a"
    items_per_page: 21
    timeout: 60
    headers:
      User-Agent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"

  - name: "awesome_mcp_servers"
    url: "https://mcpservers.org/all"
    count_selector: "body > main > div > div.max-w-screen-2xl.mx-auto > div.mb-6.flex.justify-between.items-center > div:nth-child(1) > div"
    fallback_selectors:
      - "div.max-w-screen-2xl.mx-auto > div.mb-6.flex.justify-between.items-center > div:nth-child(1) > div"
      - "div.max-w-screen-2xl > div.mb-6 > div:nth-child(1) > div"
      - "div.max-w-screen-2xl > div.mb-6 > div:first-child > div"
      - "div.max-w-screen-2xl > div.mb-6 > div > div"
      - "div.max-w-screen-2xl > div.mb-6 > div"
    timeout: 30
    headers:
      User-Agent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36" 
  - name: "cursor_directory"
    url: "https://cursor.directory/mcp"
    type: "selenium_scroll_count"
    selector: "a.h-full"
    timeout: 60 